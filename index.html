<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            height: 100vh;
            overflow: auto;
            cursor: pointer;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
        }

        /* Page screens */
        .page-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease-out;
            overflow-y: auto;
            padding: 20px 0;
        }

        .message-container {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            max-width: 90%;
            z-index: 1001;
            margin: 20px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .message-container h1 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 2.5em;
        }

        .message-container p {
            font-size: 1.2em;
            line-height: 1.6;
            color: #333;
            margin-bottom: 15px;
        }

        .tap-text {
            margin-top: 30px;
            font-style: italic;
            color: #888;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        /* Rose image styling */
        .rose-image {
            position: fixed;
            top: 40px;
            right: 40px;
            width: auto;
            height: 150px;
            z-index: 1002;
            animation: float 4s ease-in-out infinite;
            transition: all 0.4s ease;
            filter: drop-shadow(0 8px 20px rgba(0, 0, 0, 0.3));
            cursor: pointer;
        }

        .rose-image:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.4));
        }

        /* Floating rose clones - SCATTERED ACROSS WHOLE SCREEN */
        .floating-rose {
            position: fixed;
            width: auto;
            height: 100px;
            z-index: 1001;
            animation: floatAround 18s ease-in-out infinite;
            filter: drop-shadow(0 5px 15px rgba(255, 107, 107, 0.4));
            pointer-events: auto;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .floating-rose:hover {
            transform: scale(1.1);
        }

        @keyframes float {
            0%, 100% { 
                transform: translateY(0) rotate(0deg); 
            }
            33% { 
                transform: translateY(-8px) rotate(1deg); 
            }
            66% { 
                transform: translateY(-4px) rotate(-1deg); 
            }
        }

        @keyframes floatAround {
            0%, 100% { 
                transform: translateY(0) translateX(0) rotate(0deg); 
                opacity: 1;
            }
            25% { 
                transform: translateY(-40px) translateX(-30px) rotate(15deg); 
            }
            50% { 
                transform: translateY(30px) translateX(25px) rotate(-10deg); 
            }
            75% { 
                transform: translateY(-25px) translateX(-35px) rotate(8deg); 
            }
            85% { 
                opacity: 0.8;
            }
        }

        #main-content {
            display: none;
            padding: 40px 20px;
            text-align: center;
            min-height: 100vh;
            position: relative;
            z-index: 2;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            position: relative;
            z-index: 3;
        }

        h1 {
            color: #ff6b6b;
            margin-bottom: 20px;
        }

        .birthday-message {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #333;
        }

        .media-grid {
            display: flex;
            flex-direction: column;
            gap: 40px;
            margin: 30px 0;
            align-items: center;
        }

        .media-item {
            text-align: center;
            width: 100%;
            max-width: 400px;
        }

        .media-placeholder {
            width: 100%;
            max-width: 400px;
            height: 225px;
            background: linear-gradient(135deg, #ffecec, #fff5f5);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-top: 15px;
            border: 3px dashed #ff6b6b;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .media-placeholder:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,107,107,0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .media-placeholder:hover {
            transform: scale(1.02);
            border: 3px solid #ff6b6b;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }

        .media-placeholder.playing {
            border: 3px solid #ff6b6b;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.5);
            background: linear-gradient(135deg, #fff5f5, #ffecec);
        }

        .placeholder-text {
            font-size: 2.5em;
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            z-index: 2;
            transition: all 0.3s ease;
            animation: textGlow 2s ease-in-out infinite;
        }

        @keyframes textGlow {
            0%, 100% { 
                text-shadow: 2px 2px 4px rgba(0,0,0,0.1), 0 0 10px rgba(255,107,107,0.3);
            }
            50% { 
                text-shadow: 2px 2px 4px rgba(0,0,0,0.1), 0 0 20px rgba(255,107,107,0.6);
            }
        }

        .media-placeholder:hover .placeholder-text {
            transform: scale(1.05);
        }

        .placeholder-heart {
            font-size: 4em;
            color: #ff6b6b;
            animation: heartbeat 1.5s ease-in-out infinite;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            z-index: 2;
            transition: all 0.3s ease;
        }

        .media-placeholder:hover .placeholder-heart {
            transform: scale(1.1);
        }

        .placeholder-smiley {
            font-size: 4em;
            color: #ff6b6b;
            animation: bounce 2s ease-in-out infinite;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            z-index: 2;
            transform: rotate(180deg);
            display: inline-block;
            transition: all 0.3s ease;
        }

        .media-placeholder:hover .placeholder-smiley {
            transform: rotate(180deg) scale(1.1);
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1); }
            50% { transform: scale(1.15); }
            75% { transform: scale(1.1); }
        }

        @keyframes bounce {
            0%, 100% { transform: rotate(180deg) translateY(0); }
            25% { transform: rotate(180deg) translateY(-8px); }
            50% { transform: rotate(180deg) translateY(-12px); }
            75% { transform: rotate(180deg) translateY(-8px); }
        }

        .signature {
            font-style: italic;
            margin-top: 40px;
            color: #666;
        }

        video, audio {
            width: 100%;
            max-width: 400px;
            border-radius: 12px;
            margin-top: 15px;
            border: 2px solid #ff6b6b;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: none;
        }

        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 1;
            transition: opacity 0.5s ease-in-out;
        }

        #heart-confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        /* Special Bouquet Styles */
        .special-bouquet {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            z-index: 2000;
            text-align: center;
            animation: bouquetAppear 1s ease-out forwards;
            cursor: pointer;
        }

        .bouquet-image {
            width: 300px;
            height: auto;
            filter: drop-shadow(0 15px 30px rgba(0, 0, 0, 0.4));
            animation: bouquetFloat 3s ease-in-out infinite;
        }

        .bouquet-message-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            padding: 40px;
            border-radius: 25px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            text-align: center;
            width: 500px;
            height: 600px; /* Increased height */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            animation: messageAppear 0.8s ease-out 0.5s forwards;
            border: 4px solid #ff6b6b;
        }

        .bouquet-message-container h2 {
            color: #ff6b6b;
            margin-bottom: 25px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        /* Updated: Changed from heart shape to rectangular image with increased height */
        .rectangular-image {
            width: 220px;
            height: 350px; /* Increased height more than 300px */
            object-fit: cover;
            border-radius: 15px;
            margin: 20px 0;
            border: 6px solid #ff6b6b;
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.5);
            /* Removed floating animation from special image */
        }

        .bouquet-romantic-text {
            margin-top: 20px;
            font-size: 1.3em;
            color: #666;
            line-height: 1.6;
            text-align: center;
        }

        @keyframes bouquetAppear {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-180deg); }
            70% { transform: translate(-50%, -50%) scale(1.1) rotate(10deg); }
            100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
        }

        @keyframes bouquetFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-15px) rotate(2deg); }
            66% { transform: translateY(-8px) rotate(-1deg); }
        }

        @keyframes messageAppear {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
        }

        @keyframes imagePulse {
            0%, 100% { transform: scale(1); box-shadow: 0 15px 35px rgba(255, 107, 107, 0.5); }
            50% { transform: scale(1.08); box-shadow: 0 20px 45px rgba(255, 107, 107, 0.7); }
        }

        .bouquet-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1999;
            opacity: 0;
            animation: overlayAppear 0.5s ease-out forwards;
            cursor: pointer;
        }

        @keyframes overlayAppear {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        /* New Styles for Added Elements */
        .tap-indicator {
            margin-top: 15px;
            font-size: 1.2em;
            color: #ff6b6b;
            animation: tapPulse 1.5s ease-in-out infinite;
            font-weight: bold;
        }

        @keyframes tapPulse {
            0%, 100% { opacity: 0.7; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.05); }
        }

        /* Golden Glow for "Sohni Sunakhi Kudi" - Darkened text */
        .golden-glow {
            background: linear-gradient(45deg, #FFD700, #FFEC8B, #FFD700);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            animation: goldenShimmer 2s ease-in-out infinite;
            font-weight: bold;
            padding: 2px 5px;
            border-radius: 5px;
            /* Darkened text effect */
            filter: brightness(0.8) contrast(1.2);
        }

        @keyframes goldenShimmer {
            0%, 100% { 
                text-shadow: 0 0 10px rgba(255, 215, 0, 0.5), 0 0 20px rgba(255, 215, 0, 0.3);
            }
            50% { 
                text-shadow: 0 0 15px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 215, 0, 0.5), 0 0 40px rgba(255, 215, 0, 0.3);
            }
        }

        /* Red Glimmer for "Meet" text */
        .meet-glow {
            color: #ff6b6b;
            text-shadow: 0 0 5px rgba(255, 107, 107, 0.5);
            animation: redGlimmer 2s ease-in-out infinite;
            font-weight: bold;
        }

        @keyframes redGlimmer {
            0%, 100% { 
                text-shadow: 0 0 5px rgba(255, 107, 107, 0.5), 0 0 10px rgba(255, 107, 107, 0.3);
            }
            50% { 
                text-shadow: 0 0 10px rgba(255, 107, 107, 0.8), 0 0 20px rgba(255, 107, 107, 0.5), 0 0 30px rgba(255, 107, 107, 0.3);
            }
        }

        /* Mobile-specific improvements */
        @media (max-width: 768px) {
            .page-screen {
                padding: 15px 0;
            }

            .message-container {
                padding: 20px;
                margin: 15px;
                max-height: 85vh;
            }

            .message-container h1 {
                font-size: 2em;
                margin-bottom: 15px;
            }

            .message-container p {
                font-size: 1.1em;
                margin-bottom: 12px;
                line-height: 1.5;
            }

            .tap-text {
                margin-top: 20px;
                font-size: 1em;
            }

            .rose-image {
                height: 120px;
                top: 30px;
                right: 30px;
            }

            .floating-rose {
                height: 80px;
            }

            .media-item {
                max-width: 350px;
            }

            .media-placeholder {
                height: 200px;
                max-width: 350px;
            }

            video, audio {
                max-width: 350px;
            }

            .bouquet-image {
                width: 250px;
            }

            .bouquet-message-container {
                width: 400px;
                height: 500px; /* Adjusted for mobile */
                padding: 30px;
            }

            .bouquet-message-container h2 {
                font-size: 2em;
            }

            .rectangular-image {
                width: 180px;
                height: 280px; /* Adjusted for mobile */
            }

            .bouquet-romantic-text {
                font-size: 1.1em;
            }
        }

        /* Very small phones */
        @media (max-width: 480px) {
            .message-container h1 {
                font-size: 1.8em;
            }

            .message-container p {
                font-size: 1em;
            }

            .container {
                padding: 25px;
            }

            .placeholder-text {
                font-size: 2em;
            }

            .placeholder-heart, .placeholder-smiley {
                font-size: 3em;
            }

            .bouquet-image {
                width: 200px;
            }

            .bouquet-message-container {
                width: 320px;
                height: 450px; /* Adjusted for very small phones */
                padding: 25px;
            }

            .bouquet-message-container h2 {
                font-size: 1.6em;
                margin-bottom: 15px;
            }

            .rectangular-image {
                width: 140px;
                height: 220px; /* Adjusted for very small phones */
            }

            .bouquet-romantic-text {
                font-size: 1em;
                margin-top: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Page 1: Welcome Message -->
    <div id="page1" class="page-screen">
        <div class="message-container">
            <h1>Wishing You The Happiest Birthday! üéÇüéâüéâ</h1>
            <p>So as I am not able to meet you today and give a gift.</p>
            <p>Toh Socha ki Birthday Wish hi thoda alag tareeke se Kardu....</p>
            <p>Cause thoda toh special wish hona chahiye na, Baaki Gift baad mein.</p>
            <p class="tap-text">Tap Anywhere....</p>
        </div>
    </div>

    <!-- Page 2: Special Message -->
    <div id="page2" class="page-screen" style="display: none;">
        <div class="message-container">
            <h1>Sohni Kudi Detector! ‚ú®</h1>
            <p>Only the most <span class="golden-glow">Sohni-Sunakhi Kudi</span> that I have ever met will be able to continue further....‚ú®‚ú®</p>
            <p>Maine ye aaj raat mein hi banana seekha hai, toh webpage thoda childish lag skta hai üôÇ...</p>
            <p class="tap-text">Tap Anywhere....</p>
        </div>
    </div>

    <!-- Page 3: Main Content -->
    <div id="main-content">
        <!-- Rose Image - Using original rose image reference -->
        <img src="./your_custom_rose_image.jpg" alt="Beautiful Rose" class="rose-image" id="main-rose">

        <div class="container">
            <h1>üéâ Happy Birthday, <span class="meet-glow">Meet</span>! üéÇ</h1>
            
            <div class="birthday-message">
                <p>Every moment with you is a blessing I cherish deeply.</p>
                <p>Today, I hope you feel all the love and happiness.</p>
                <p>You deserve the world, and so much more.</p>
            </div>

            <!-- Media Grid Layout -->
            <div class="media-grid">
                <!-- First Video -->
                <div class="media-item">
                    <h2>üé¨ Happiest Birthday Mayalu!</h2>
                    <div class="media-placeholder" id="placeholder-video1" data-media="video1">
                        <div class="placeholder-text" style="font-style: italic; font-size: 1.8em;">Happy Birthday <span class="meet-glow">Meet</span></div>
                        <div class="tap-indicator">Tap</div>
                    </div>
                    <video controls id="birthday-video1">
                        <source src="./birthday_video1.mp4" type="video/mp4">
                        <source src="./birthday_video1.mov" type="video/quicktime">
                    </video>
                </div>

                <!-- Second Video -->
                <div class="media-item">
                    <h2>üé¨ Started Making This Video A Long Time Ago!</h2>
                    <div class="media-placeholder" id="placeholder-video2" data-media="video2">
                        <div class="placeholder-heart">‚ù§Ô∏è</div>
                        <div class="tap-indicator">Tap</div>
                    </div>
                    <video controls id="birthday-video2">
                        <source src="./birthday_video2.mp4" type="video/mp4">
                        <source src="./birthday_video2.mov" type="video/quicktime">
                    </video>
                </div>

                <!-- Audio -->
                <div class="media-item">
                    <h2>üéµ From...</h2>
                    <div class="media-placeholder" id="placeholder-audio" data-media="audio">
                        <div class="placeholder-smiley">üôÇ</div>
                        <div class="tap-indicator">Tap</div>
                    </div>
                    <audio controls id="voice-note">
                        <source src="./voice_note.mp3" type="audio/mp3">
                        <source src="./voice_note.wav" type="audio/wav">
                    </audio>
                </div>
            </div>

            <div class="signature">
                <p>With all my love,</p>
                <p><strong>Mann</strong></p>
            </div>
        </div>
    </div>

    <!-- Confetti Canvases -->
    <canvas id="confetti-canvas"></canvas>
    <canvas id="heart-confetti-canvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const page1 = document.getElementById('page1');
            const page2 = document.getElementById('page2');
            const mainContent = document.getElementById('main-content');
            const confettiCanvas = document.getElementById('confetti-canvas');
            const heartCanvas = document.getElementById('heart-confetti-canvas');
            const videoElement1 = document.getElementById('birthday-video1');
            const videoElement2 = document.getElementById('birthday-video2');
            const audioElement = document.getElementById('voice-note');
            const mainRose = document.getElementById('main-rose');
            const ctx = confettiCanvas.getContext('2d');
            const heartCtx = heartCanvas.getContext('2d');
            
            let mainConfettiAnimation;
            let heartConfettiAnimation;
            let roseConfettiAnimation;
            let mainConfettiPieces = [];
            let heartConfettiPieces = [];
            let roseConfettiPieces = [];
            let isMediaPlaying = false;
            let isRoseConfettiActive = false;
            let roseCloneCount = 0;
            const maxRoses = 21; // Changed to 21 so 22nd click triggers bouquet
            let roseConfettiTimer = null;
            let hasSpecialBouquetAppeared = false;
            let bouquetTimeout = null;

            // Set canvas sizes
            confettiCanvas.width = window.innerWidth;
            confettiCanvas.height = window.innerHeight;
            heartCanvas.width = window.innerWidth;
            heartCanvas.height = window.innerHeight;

            // Page navigation
            let currentPage = 1;
            
            function goToNextPage() {
                if (currentPage === 1) {
                    page1.style.opacity = '0';
                    setTimeout(() => {
                        page1.style.display = 'none';
                        page2.style.display = 'flex';
                        page2.style.opacity = '1';
                        currentPage = 2;
                    }, 500);
                } else if (currentPage === 2) {
                    page2.style.opacity = '0';
                    setTimeout(() => {
                        page2.style.display = 'none';
                        mainContent.style.display = 'block';
                        startMainConfetti(); // Start colorful confetti indefinitely
                    }, 500);
                }
            }

            // Click to navigate pages
            page1.addEventListener('click', goToNextPage);
            page2.addEventListener('click', goToNextPage);

            // Media placeholders functionality
            function setupMediaPlaceholders() {
                const mediaPlaceholders = document.querySelectorAll('.media-placeholder');
                
                mediaPlaceholders.forEach(placeholder => {
                    placeholder.addEventListener('click', function() {
                        const mediaType = this.getAttribute('data-media');
                        let mediaElement;
                        
                        switch(mediaType) {
                            case 'video1':
                                mediaElement = videoElement1;
                                break;
                            case 'video2':
                                mediaElement = videoElement2;
                                break;
                            case 'audio':
                                mediaElement = audioElement;
                                break;
                        }
                        
                        if (mediaElement.paused) {
                            // Show media, hide placeholder
                            mediaElement.style.display = 'block';
                            this.style.display = 'none';
                            
                            // Play media
                            mediaElement.play();
                            this.classList.add('playing');
                            
                            // Trigger heart confetti and stop colorful confetti
                            if (!isMediaPlaying) {
                                isMediaPlaying = true;
                                stopMainConfetti();
                                startHeartConfetti();
                            }
                        } else {
                            mediaElement.pause();
                            this.classList.remove('playing');
                        }
                    });
                });

                // Add pause/play listeners to update placeholder states
                [videoElement1, videoElement2, audioElement].forEach(media => {
                    media.addEventListener('pause', function() {
                        updateMediaPlaceholderState(this, false);
                    });
                    media.addEventListener('play', function() {
                        updateMediaPlaceholderState(this, true);
                    });
                    media.addEventListener('ended', function() {
                        updateMediaPlaceholderState(this, false);
                        showPlaceholder(this);
                    });
                });
            }

            function updateMediaPlaceholderState(mediaElement, isPlaying) {
                const mediaPlaceholders = document.querySelectorAll('.media-placeholder');
                mediaPlaceholders.forEach(placeholder => {
                    const mediaType = placeholder.getAttribute('data-media');
                    if (
                        (mediaType === 'video1' && mediaElement === videoElement1) ||
                        (mediaType === 'video2' && mediaElement === videoElement2) ||
                        (mediaType === 'audio' && mediaElement === audioElement)
                    ) {
                        if (isPlaying) {
                            placeholder.classList.add('playing');
                        } else {
                            placeholder.classList.remove('playing');
                        }
                    }
                });
            }

            function showPlaceholder(mediaElement) {
                let placeholder;
                if (mediaElement === videoElement1) {
                    placeholder = document.getElementById('placeholder-video1');
                } else if (mediaElement === videoElement2) {
                    placeholder = document.getElementById('placeholder-video2');
                } else if (mediaElement === audioElement) {
                    placeholder = document.getElementById('placeholder-audio');
                }
                
                if (placeholder) {
                    mediaElement.style.display = 'none';
                    placeholder.style.display = 'flex';
                }
            }

            // Initialize media placeholders
            setupMediaPlaceholders();

            // Rose multiplication effect - SCATTERED ACROSS WHOLE SCREEN
            mainRose.addEventListener('click', function() {
                if (roseCloneCount < maxRoses) {
                    createFloatingRose();
                    roseCloneCount++;
                } else if (!hasSpecialBouquetAppeared) {
                    // 22nd click - Special bouquet appears! (Changed from 23rd to 22nd)
                    createSpecialBouquet();
                    hasSpecialBouquetAppeared = true;
                }
                // Start rose petal confetti from main rose
                startRoseConfetti();
            });

            function createFloatingRose() {
                const floatingRose = document.createElement('img');
                floatingRose.src = './your_custom_rose_image.jpg';
                floatingRose.className = 'floating-rose';
                floatingRose.alt = 'Floating Rose';
                
                // RANDOM SCATTERED POSITIONING ACROSS ENTIRE SCREEN
                const randomLeft = Math.random() * (window.innerWidth - 120);
                const randomTop = Math.random() * (window.innerHeight - 120);
                
                floatingRose.style.left = `${randomLeft}px`;
                floatingRose.style.top = `${randomTop}px`;
                
                // Random animation properties for natural movement
                floatingRose.style.animationDelay = `${Math.random() * 5}s`;
                floatingRose.style.animationDuration = `${18 + Math.random() * 12}s`;
                
                // Add click event for rose petal burst effect
                floatingRose.addEventListener('click', function(e) {
                    e.stopPropagation();
                    createRoseBurst(this);
                    // Remove the rose after burst
                    setTimeout(() => {
                        if (floatingRose.parentNode) {
                            floatingRose.parentNode.removeChild(floatingRose);
                            roseCloneCount--;
                        }
                    }, 300);
                });
                
                document.body.appendChild(floatingRose);
                
                // Remove rose after animation completes
                setTimeout(() => {
                    if (floatingRose.parentNode) {
                        floatingRose.parentNode.removeChild(floatingRose);
                        roseCloneCount--;
                    }
                }, 30000);
            }

            // Special Bouquet for 22nd click
            function createSpecialBouquet() {
                // Create overlay
                const overlay = document.createElement('div');
                overlay.className = 'bouquet-overlay';
                document.body.appendChild(overlay);

                // Create bouquet container
                const bouquetContainer = document.createElement('div');
                bouquetContainer.className = 'special-bouquet';
                
                // Create bouquet image
                const bouquetImage = document.createElement('img');
                bouquetImage.src = './your_custom_rose_image.jpg'; // Using same rose image for bouquet
                bouquetImage.className = 'bouquet-image';
                bouquetImage.alt = 'Special Rose Bouquet';
                
                bouquetContainer.appendChild(bouquetImage);
                document.body.appendChild(bouquetContainer);

                // Add click event to show message
                bouquetContainer.addEventListener('click', function(e) {
                    e.stopPropagation();
                    showBouquetMessage(bouquetContainer, overlay);
                });

                // Add click event to overlay to close bouquet
                overlay.addEventListener('click', function() {
                    closeSpecialBouquet(bouquetContainer, overlay);
                });

                // Stop all other confetti
                stopMainConfetti();
                stopRoseConfetti();
                fadeOutHeartConfetti();

                // Set 30-second timeout to auto-close
                bouquetTimeout = setTimeout(() => {
                    closeSpecialBouquet(bouquetContainer, overlay);
                }, 30000);
            }

            function showBouquetMessage(bouquetContainer, overlay) {
                // Remove existing message if any
                const existingMessage = bouquetContainer.querySelector('.bouquet-message-container');
                if (existingMessage) {
                    existingMessage.remove();
                }

                // Create message container
                const messageContainer = document.createElement('div');
                messageContainer.className = 'bouquet-message-container';
                
                // Create message
                const message = document.createElement('h2');
                message.innerHTML = 'Happy 22nd Birthday <span class="meet-glow">Meet</span>! üéâ';
                
                // Create rectangular image (not heart-shaped) - NO FLOATING ANIMATION
                const rectangularImage = document.createElement('img');
                rectangularImage.src = './special_heart_image.jpg'; // Your special image
                rectangularImage.className = 'rectangular-image';
                rectangularImage.alt = 'Special Memory';
                rectangularImage.onerror = function() {
                    // If image fails to load, show a placeholder
                    this.src = './your_custom_rose_image.jpg';
                    this.alt = 'Rose Placeholder';
                };
                
                // Create romantic text
                const romanticText = document.createElement('div');
                romanticText.className = 'bouquet-romantic-text';
                romanticText.innerHTML = '22 roses for 22 wonderful years! üåπ<br>May your special day be as beautiful as you are! ‚ú®';
                
                messageContainer.appendChild(message);
                messageContainer.appendChild(rectangularImage);
                messageContainer.appendChild(romanticText);
                
                bouquetContainer.appendChild(messageContainer);

                // Add extra rose petal confetti for celebration
                createCelebrationConfetti();

                // Reset the 30-second timeout
                if (bouquetTimeout) {
                    clearTimeout(bouquetTimeout);
                }
                bouquetTimeout = setTimeout(() => {
                    closeSpecialBouquet(bouquetContainer, overlay);
                }, 30000);
            }

            function closeSpecialBouquet(bouquetContainer, overlay) {
                // Remove bouquet and overlay
                if (bouquetContainer.parentNode) {
                    bouquetContainer.parentNode.removeChild(bouquetContainer);
                }
                if (overlay.parentNode) {
                    overlay.parentNode.removeChild(overlay);
                }
                
                // Clear timeout
                if (bouquetTimeout) {
                    clearTimeout(bouquetTimeout);
                }
                
                // Reset bouquet flag
                hasSpecialBouquetAppeared = false;
                
                // Restart main confetti
                if (!isMediaPlaying && !isRoseConfettiActive) {
                    startMainConfetti();
                }
            }

            function createCelebrationConfetti() {
                // Create extra special rose petal confetti
                const celebrationColors = [
                    '#ff69b4', '#ff1493', '#db7093', '#c71585', '#ffb6c1', 
                    '#ffc0cb', '#ffd1dc', '#ffddf4'
                ];
                
                for (let i = 0; i < 100; i++) {
                    roseConfettiPieces.push({
                        x: Math.random() * confettiCanvas.width,
                        y: -Math.random() * 100,
                        size: Math.random() * 15 + 8,
                        color: celebrationColors[Math.floor(Math.random() * celebrationColors.length)],
                        speed: Math.random() * 3 + 1,
                        rotation: Math.random() * 6.28,
                        rotationSpeed: Math.random() * 0.1 - 0.05,
                        wobble: Math.random() * 2,
                        wobbleSpeed: Math.random() * 0.1,
                        sway: Math.random() * 0.8 - 0.4,
                        shape: Math.random() > 0.5 ? 'curved' : 'heart'
                    });
                }
                
                if (!roseConfettiAnimation) {
                    roseConfettiAnimation = requestAnimationFrame(drawRoseConfetti);
                }
            }

            // Rose Petal Confetti Effect (from main rose) - RESTORED TO PINK SHADES
            function startRoseConfetti() {
                // Stop colorful confetti while rose petals fall
                if (!isRoseConfettiActive) {
                    stopMainConfetti();
                    isRoseConfettiActive = true;
                }
                
                // Add more rose petals (30 per click) - RESTORED TO PINK SHADES
                const roseColors = [
                    '#ff69b4', '#ff1493', '#db7093', '#c71585', '#ffb6c1', 
                    '#ffc0cb', '#ffd1dc', '#ffddf4', '#ffe4e1', '#fff0f5'
                ];
                
                for (let i = 0; i < 30; i++) {
                    roseConfettiPieces.push({
                        x: Math.random() * confettiCanvas.width,
                        y: -Math.random() * 100,
                        size: Math.random() * 12 + 6,
                        color: roseColors[Math.floor(Math.random() * roseColors.length)],
                        speed: Math.random() * 2 + 1,
                        rotation: Math.random() * 6.28,
                        rotationSpeed: Math.random() * 0.08 - 0.04,
                        wobble: Math.random() * 2,
                        wobbleSpeed: Math.random() * 0.08,
                        sway: Math.random() * 0.5 - 0.25,
                        shape: Math.random() > 0.5 ? 'curved' : 'heart'
                    });
                }
                
                // Start animation if not already running
                if (!roseConfettiAnimation) {
                    roseConfettiAnimation = requestAnimationFrame(drawRoseConfetti);
                }
                
                // Reset/Extend the 10-second timer
                if (roseConfettiTimer) {
                    clearTimeout(roseConfettiTimer);
                }
                
                roseConfettiTimer = setTimeout(() => {
                    stopRoseConfetti();
                }, 10000);
            }

            // Rose Burst Effect (from small floating roses) - RESTORED TO PINK SHADES
            function createRoseBurst(roseElement) {
                const rect = roseElement.getBoundingClientRect();
                const burstX = rect.left + rect.width / 2;
                const burstY = rect.top + rect.height / 2;
                
                // RESTORED TO PINK SHADES
                const burstColors = [
                    '#ff69b4', '#ff1493', '#db7093', '#c71585', '#ffb6c1'
                ];
                
                // Create burst particles
                for (let i = 0; i < 25; i++) {
                    const angle = Math.random() * Math.PI * 2;
                    const speed = Math.random() * 5 + 2;
                    const size = Math.random() * 8 + 4;
                    
                    roseConfettiPieces.push({
                        x: burstX,
                        y: burstY,
                        size: size,
                        color: burstColors[Math.floor(Math.random() * burstColors.length)],
                        speedX: Math.cos(angle) * speed,
                        speedY: Math.sin(angle) * speed,
                        rotation: Math.random() * 6.28,
                        rotationSpeed: Math.random() * 0.1 - 0.05,
                        wobble: Math.random() * 2,
                        wobbleSpeed: Math.random() * 0.1,
                        sway: Math.random() * 0.5 - 0.25,
                        shape: Math.random() > 0.5 ? 'curved' : 'heart',
                        gravity: 0.1,
                        life: 100
                    });
                }
                
                // Start animation if not already running
                if (!roseConfettiAnimation) {
                    isRoseConfettiActive = true;
                    stopMainConfetti();
                    roseConfettiAnimation = requestAnimationFrame(drawRoseConfetti);
                }
            }

            function drawRoseConfetti() {
                if (!roseConfettiAnimation) return;
                
                ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);

                roseConfettiPieces.forEach((piece, index) => {
                    ctx.save();
                    ctx.translate(piece.x, piece.y);
                    ctx.rotate(piece.rotation);
                    
                    ctx.fillStyle = piece.color;
                    
                    // Draw realistic rose petal shapes
                    if (piece.shape === 'curved') {
                        // Curved petal shape
                        ctx.beginPath();
                        ctx.ellipse(0, 0, piece.size, piece.size * 0.6, piece.rotation, 0, Math.PI * 2);
                        ctx.fill();
                    } else {
                        // Heart-shaped petal
                        ctx.beginPath();
                        const scale = piece.size / 10;
                        ctx.moveTo(0, -piece.size/2);
                        for (let i = 0; i < 20; i++) {
                            const angle = 0.2 * i;
                            const x = 8 * Math.pow(Math.sin(angle), 3) * scale;
                            const y = -(6.5 * Math.cos(angle) - 2.5 * Math.cos(2 * angle) - Math.cos(3 * angle) - 0.5 * Math.cos(4 * angle)) * scale;
                            ctx.lineTo(x, y);
                        }
                        ctx.closePath();
                        ctx.fill();
                    }

                    ctx.restore();

                    // Update position with physics
                    if (piece.speedX !== undefined) {
                        // Burst particle physics
                        piece.x += piece.speedX;
                        piece.y += piece.speedY;
                        piece.speedY += piece.gravity;
                        piece.life--;
                        
                        if (piece.life <= 0) {
                            roseConfettiPieces.splice(index, 1);
                        }
                    } else {
                        // Regular falling petal physics
                        piece.y += piece.speed;
                        piece.x += Math.sin(piece.wobble) * 0.8 + piece.sway;
                        piece.rotation += piece.rotationSpeed;
                        piece.wobble += piece.wobbleSpeed;

                        // Remove if out of screen
                        if (piece.y > confettiCanvas.height) {
                            roseConfettiPieces.splice(index, 1);
                        }
                    }
                });

                // Continue animation if there are still pieces
                if (roseConfettiPieces.length > 0) {
                    roseConfettiAnimation = requestAnimationFrame(drawRoseConfetti);
                } else {
                    roseConfettiAnimation = null;
                    isRoseConfettiActive = false;
                    // Restart colorful confetti if no media is playing
                    if (!isMediaPlaying) {
                        startMainConfetti();
                    }
                }
            }

            function stopRoseConfetti() {
                if (roseConfettiTimer) {
                    clearTimeout(roseConfettiTimer);
                    roseConfettiTimer = null;
                }
                
                // Let the existing pieces finish their animation naturally
                // They will be removed in drawRoseConfetti when they go off-screen
            }

            function setupMediaListeners() {
                videoElement1.onplay = handleMediaPlay;
                videoElement1.onpause = handleMediaPause;
                videoElement1.onended = handleMediaPause;
                videoElement2.onplay = handleMediaPlay;
                videoElement2.onpause = handleMediaPause;
                videoElement2.onended = handleMediaPause;
                audioElement.onplay = handleMediaPlay;
                audioElement.onpause = handleMediaPause;
                audioElement.onended = handleMediaPause;
            }

            function handleMediaPlay() {
                if (!isMediaPlaying) {
                    isMediaPlaying = true;
                    stopMainConfetti();
                    startHeartConfetti();
                }
            }

            function handleMediaPause() {
                if (isMediaPlaying && 
                    videoElement1.paused && 
                    videoElement2.paused && 
                    audioElement.paused) {
                    isMediaPlaying = false;
                    fadeOutHeartConfetti();
                    // Restart colorful confetti if no rose petals are falling
                    if (!isRoseConfettiActive) {
                        startMainConfetti();
                    }
                }
            }

            function stopMainConfetti() {
                if (mainConfettiAnimation) {
                    cancelAnimationFrame(mainConfettiAnimation);
                    mainConfettiAnimation = null;
                }
                
                ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                mainConfettiPieces = [];
            }

            function fadeOutHeartConfetti() {
                heartCanvas.style.opacity = '0';
                setTimeout(() => {
                    if (heartConfettiAnimation) {
                        cancelAnimationFrame(heartConfettiAnimation);
                        heartConfettiAnimation = null;
                    }
                    heartConfettiPieces = [];
                    heartCtx.clearRect(0, 0, heartCanvas.width, heartCanvas.height);
                }, 500);
            }

            function startHeartConfetti() {
                heartCanvas.style.opacity = '1';
                heartConfettiPieces = [];
                
                const heartColors = [
                    '#ffb6c1', '#ffc0cb', '#ffd1dc', '#ffddf4', '#ffe4e1', '#fff0f5',
                    '#d291bc', '#c71585', '#db7093', '#ff1493', '#ff69b4', '#dc143c'
                ];
                
                for (let i = 0; i < 160; i++) {
                    heartConfettiPieces.push({
                        x: Math.random() * heartCanvas.width,
                        y: -Math.random() * 100,
                        size: Math.random() * 4 + 3,
                        color: heartColors[Math.floor(Math.random() * heartColors.length)],
                        speed: Math.random() * 1 + 0.5,
                        rotation: Math.random() * 6.28,
                        rotationSpeed: Math.random() * 0.05 - 0.025,
                        wobble: Math.random() * 2,
                        wobbleSpeed: Math.random() * 0.05
                    });
                }

                function drawHeartConfetti() {
                    if (!heartConfettiAnimation) return;
                    
                    heartCtx.clearRect(0, 0, heartCanvas.width, heartCanvas.height);

                    heartConfettiPieces.forEach((piece, index) => {
                        heartCtx.save();
                        heartCtx.translate(piece.x, piece.y);
                        heartCtx.rotate(piece.rotation);
                        
                        heartCtx.fillStyle = piece.color;
                        
                        heartCtx.beginPath();
                        const scale = piece.size / 10;
                        heartCtx.moveTo(0, -piece.size);
                        for (let i = 0; i < 30; i++) {
                            const angle = 0.2 * i;
                            const x = 16 * Math.pow(Math.sin(angle), 3) * scale;
                            const y = -(13 * Math.cos(angle) - 5 * Math.cos(2 * angle) - 2 * Math.cos(3 * angle) - Math.cos(4 * angle)) * scale;
                            heartCtx.lineTo(x, y);
                        }
                        heartCtx.closePath();
                        heartCtx.fill();

                        heartCtx.restore();

                        piece.y += piece.speed;
                        piece.x += Math.sin(piece.wobble) * 0.5;
                        piece.rotation += piece.rotationSpeed;
                        piece.wobble += piece.wobbleSpeed;

                        if (piece.y > heartCanvas.height) {
                            piece.y = -10;
                            piece.x = Math.random() * heartCanvas.width;
                        }
                    });

                    heartConfettiAnimation = requestAnimationFrame(drawHeartConfetti);
                }

                heartConfettiAnimation = requestAnimationFrame(drawHeartConfetti);
            }

            function startMainConfetti() {
                confettiCanvas.style.opacity = '1';
                mainConfettiPieces = [];
                const colors = ['#4ecdc4', '#45b7d1', '#ffbe0b', '#fb5607', '#8338ec', '#3a86ff'];
                const shapes = ['circle', 'rectangle'];

                for (let i = 0; i < 350; i++) {
                    mainConfettiPieces.push({
                        x: Math.random() * confettiCanvas.width,
                        y: -Math.random() * confettiCanvas.height,
                        size: Math.random() * 4 + 2,
                        color: colors[Math.floor(Math.random() * colors.length)],
                        shape: shapes[Math.floor(Math.random() * shapes.length)],
                        speed: Math.random() * 3 + 1,
                        rotation: Math.random() * 6.28,
                        rotationSpeed: Math.random() * 0.1 - 0.05,
                        wobble: Math.random() * 2,
                        wobbleSpeed: Math.random() * 0.1
                    });
                }

                function drawMainConfetti() {
                    if (!mainConfettiAnimation) return;
                    
                    ctx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);

                    mainConfettiPieces.forEach((piece, index) => {
                        ctx.save();
                        ctx.translate(piece.x, piece.y);
                        ctx.rotate(piece.rotation);
                        
                        ctx.fillStyle = piece.color;
                        
                        switch(piece.shape) {
                            case 'circle':
                                ctx.beginPath();
                                ctx.arc(0, 0, piece.size, 0, Math.PI * 2);
                                ctx.fill();
                                break;
                            case 'rectangle':
                                ctx.fillRect(-piece.size, -piece.size, piece.size * 2, piece.size * 2);
                                break;
                        }

                        ctx.restore();

                        piece.y += piece.speed;
                        piece.x += Math.sin(piece.wobble) * 1;
                        piece.rotation += piece.rotationSpeed;
                        piece.wobble += piece.wobbleSpeed;

                        if (piece.y > confettiCanvas.height) {
                            piece.y = -20;
                            piece.x = Math.random() * confettiCanvas.width;
                        }
                    });

                    mainConfettiAnimation = requestAnimationFrame(drawMainConfetti);
                }

                setupMediaListeners();
                mainConfettiAnimation = requestAnimationFrame(drawMainConfetti);
            }
        });
    </script>
</body>
</html>
